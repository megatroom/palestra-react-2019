<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>React 2019 by Nardini</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">


		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="css/code/atom-one-dark.css">

		<link rel="stylesheet" href="css/main.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section class="introduction" data-background-image="images/hooksbg.jpg">
					<br><br><br>
					<h2>React 2019</h2>
					<p>by Bruno Nardini</p>
				</section>
				<section>
					<h2>Ops!</h2>
					<p>Reveal.js + highlight.js turns jsx tag to lowercase</p>
					<p>But remember: the first letter of components are always in uppercase</p>
				</section>
				<section>
					<h2>React 15.6.2</h2>
					<p>Switch all packages from <br/> BSD + Patents to <span class="purple">MIT license</span></p>
				</section>
				<section>
					<h2>React v16.0</h2>
					<p>Fragments, error boundaries, portals, support for custom DOM attributes, improved server-side rendering, and reduced file size.</p>
				</section>
				<section>
					<h2>Error Boundaries</h2>
					<p>React 16 introduces a new concept of an “error boundary”.</p>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="7-13,16-19">
						class ErrorBoundary extends React.Component {
						  constructor(props) {
						    super(props);
						    this.state = { hasError: false };
						  }

						  componentDidCatch(error, info) {
						    // Display fallback UI
						    this.setState({ hasError: true });
						    // You can also log the error
						    // to an error reporting service
						    logErrorToMyService(error, info);
						  }

						  render() {
						    if (this.state.hasError) {
						      // You can render any custom fallback UI
						      return <h1>Something went wrong.</h1>;
						    }

						    return this.props.children;
						  }
						}
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="3,5">
						render() {
						  return (
						    <ErrorBoundary>
						      <h1>I was successfully rendered</h1>
						    </ErrorBoundary>
						  )
						}
					</code></pre>
				</section>
				<section>
					<p>Oh Yeah, Fragments!</p>
					<pre><code class="javascript" data-trim>
						render() {
						  return (
						    <React.Fragment>
						      <li>First item</li>,
						      <li>Second item</li>,
						      <li>Third item</li>,
						    </React.Fragment>
						  );
						}
					</code></pre>
				</section>
				<section>
					<p>You can now return an array of elements:</p>
					<pre><code data-trim>
						render() {
						  return [
						    /* Don't forget the keys :) */
						    <li key="A">First item</li>,
						    <li key="B">Second item</li>,
						    <li key="C">Third item</li>,
						  ];
						}
					</code></pre>
				</section>
				<section>
					<p>And strings:</p>
					<pre><code class="javascript" data-trim>
						render() {
						  return 'Look ma, no spans!';
						}
					</code></pre>
				</section>
				<section>
					<h2>Portals</h2>
					<p>Portals provide a first-class way to render children into a DOM node that exists outside the DOM hierarchy of the parent component.</p>
					<pre><code class="javascript" data-trim>
						render() {
						  return ReactDOM.createPortal(
						    this.props.children,
						    domNode,
						  );
						}
					</code></pre>
				</section>
				<section>
					<h2>React v16.3.0</h2>
					<p>New lifecycles and context API</p>
				</section>
				<section>
					<p>Official Context API</p>
					<img src="images/context.png" alt="Context API">
				</section>
				<section>
					<h2>React Context or Redux?</h2>
				</section>
				<section>
					<h2>React Profiler</h2>
					<p>React 16.5 adds support for a new DevTools profiler plugin.</p>
					<img src="images/profile.png" alt="Profile APÌ">
				</section>
				<section>
					<img src="images/profle2.gif" alt="Profile API">
				</section>
				<section>
					<h3>Component Lifecycle Changes</h3>
					<p>Deprecation warning (will be removed in 17.0):</p>
					<ul>
						<li>componentWillMount</li>
						<li>componentWillReceiveProps</li>
						<li>componentWillUpdate</li>
					</ul>
					<p>New lifecycles:</p>
					<ul>
						<li>getDerivedStateFromProps</li>
						<li>getSnapshotBeforeUpdate</li>
					</ul>
				</section>
				<section>
					<h2>Create React App 2.0</h2>
					<p>Babel 7, Sass, and more</p>
				</section>
				<section>
					<ul>
						<li>Updated to <span class="purple">Babel 7</span>, including support for the <span class="purple">React fragment</span> syntax and many bugfixes.</li>
						<li>Updated to <span class="purple">Webpack 4</span>, which automatically splits JS bundles more intelligently.</li>
						<li>We updated to <span class="purple">Jest 23</span>, which includes an interactive mode for reviewing snapshots.</li>
					</ul>
				</section>
				<section>
					<ul>
						<li>More styling options: you can use <span class="purple">Sass</span> and <span class="purple">CSS Modules</span> out of the box.</li>
						<li>Added <span class="purple">PostCSS</span> so you can use <span class="purple">new CSS features in old browsers.</span></li>
						<li>You can now optionally get a <span class="purple">smaller CSS bundle</span> if you only plan to target <span class="purple">modern browsers.</span></li>
					</ul>
				</section>
				<section>
					<ul>
						<li>Service workers are now opt-in and are built using <span class="purple">Google’s Workbox</span>.</li>
						<li>You can use <span class="purple">Apollo</span>, <span class="purple">Relay Modern</span>, <span class="purple">MDX</span>, and other third-party <span class="purple">Babel Macros transforms</span>.</li>
						<li>You can now import an <span class="purple">SVG as a React component</span>, and use it in JSX.</li>
					</ul>
				</section>
				<section>
					<h2>React v16.6.0</h2>
					<p>lazy, memo and contextType</p>
				</section>
				<section>
					<h2>React.memo</h2>
					<pre><code class="javascript" data-trim data-noescape>
						const MyComponent = React.memo(function MyComponent(props) {
						  /* render using props */
						});
					</code></pre>
				</section>
				<section>
					<pre><code data-trim data-noescape>
						class MyComponent extends React.PureComponent {
						  render() {
						    /* render using this.props and this.state */
						  }
						});
					</code></pre>
					<p>é igual a</p>
					<pre><code data-trim data-noescape>
						const MyComponent = React.memo(function MyComponent(props) {
						  /* render using props */
						});
					</code></pre>
				</section>
				<section class="shallow-now" data-background-image="images/shallownow.jpg">
					<h2>
						<span class="blue">PureComponent</span> e <span class="blue">memo</span><br/>
						executam uma <span class="blue">comparação</span><br/>
						<strike>juntos e</strike> <span class="blue">shallow</span> <strike>now</strike><br/>
						entre <span class="blue">props</span> e <span class="blue">state</span>
					</h2>
				</section>
				<section>
					<h2>React.lazy</h2>
					<p>Code-Splitting with Suspense</p>
					<pre><code class="javascript" data-trim>
						import React, { lazy, Suspense } from 'react';

						const OtherComponent = lazy(() => import('./OtherComp'));

						function MyComponent() {
						  return (
						    &lt;Suspense fallback={&lt;div&gt;Loading...&lt;/div&gt;}&gt;
						      &lt;OtherComponent /&gt;
						    &lt;/Suspense&gt;
						  );
						}
					</code></pre>
				</section>
				<section>
					<h2>Class.contextType</h2>
					<pre><code class="javascript" data-trim data-noescape>
						class MyClass extends React.Component {
						  static contextType = MyContext;
						}
					</code></pre>
					<p>ou</p>
					<pre><code class="javascript" data-trim data-noescape>
						class MyClass extends React.Component {
						}

						MyClass.contextType = MyContext;
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-noescape>
						class MyClass extends React.Component {
						  static contextType = MyContext;

						  componentDidMount() {
						    let value = this.context;
						    /* perform a side-effect at mount
						    using the value of MyContext */
						  }

						  componentDidUpdate() {
						    let value = this.context;
						    /* ... */
						  }

						  componentWillUnmount() {
						    let value = this.context;
						    /* ... */
						  }

						  render() {
						    let value = this.context;
						    /* render something based on the value of MyContext */
						  }
						}
					</code></pre>
				</section>
				<section>
					<h4>static getDerivedStateFromError()</h4>
					<pre style="margin-top:40px"><code class="javascript" data-trim data-noescape>
						static getDerivedStateFromError(error)
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="7-11,14-17">
						class ErrorBoundary extends React.Component {
						  constructor(props) {
						    super(props);
						    this.state = { hasError: false };
						  }

						  static getDerivedStateFromError(error) {
						    /* Update state so the next render
						       will show the fallback UI. */
						    return { hasError: true };
						  }

						  render() {
						    if (this.state.hasError) {
						      // You can render any custom fallback UI
							  return <h1></h1>;
						    }

						    return this.props.children;
						  }
						}
					</code></pre>
				</section>
				<section>
					<h2>React v16.8</h2>
					<p>The One With Hooks</p>
				</section>
				<section>
					<h2>What Are Hooks?</h2>
					<p>
						Hooks let you use state and other React features without writing a class.
						You can also <strong>build your own Hooks</strong> to share reusable stateful logic between components.
					</p>
				</section>
				<section>
					<ul>
						<li>
							Basic Hooks
							<ul>
								<li>useState</li>
								<li>useEffect</li>
								<li>useContext</li>
							</ul>
						</li>
						<li>
							Additional Hooks
							<ul>
								<li>useReducer</li>
								<li>useCallback</li>
								<li>useMemo</li>
								<li>useRef</li>
								<li>useImperativeHandle</li>
								<li>useLayoutEffect</li>
								<li>useDebugValue</li>
							</ul>
						</li>
					</ul>
				</section>
				<section>
					<h2>useState</h2>
					<p>Returns a stateful value, and a function to update it.</p>
					<pre><code class="javascript" data-trim>
						const [state, setState] = useState(initialState);
					</code></pre>
				</section>
				<section class="full-code">
					<p>Handle state with class:</p>
					<pre><code class="javascript" data-trim data-line-numbers>
						import React, { Component } from "react";

						class Example extends Component {
						  state = { count: 0 };

						  handleCount = () => {
						    this.setState(prevState => ({
						      count: prevState.count + 1
						    }));
						  }

						  render() {
						    return (
						      <div>
						        <p>You clicked {this.state.count} times</p>
						        &lt;button onClick={this.handleCount}&gt;
						          Click me
						        &lt;/button&gt;
						      </div>
						    );
						  }
						}
					</code></pre>
				</section>
				<section>
					<p>Handle state with function:</p>
					<pre><code class="javascript" data-trim data-line-numbers>
						import React, { useState } from &#39;react&#39;;

						function Example() {
						  const [count, setCount] = useState(0);

						  return (
						    &lt;div&gt;
						      &lt;p&gt;You clicked {count} times&lt;/p&gt;
						      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;
						        Click me
						      &lt;/button&gt;
						    &lt;/div&gt;
						  );
						}
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="6-8,13">
						import React, { useState } from &#39;react&#39;;

						function Example() {
						  const [count, setCount] = useState(0);

						  const handleCount = () => {
						    setCount(count + 1);
						  }

						  return (
						    &lt;div&gt;
						      &lt;p&gt;You clicked {count} times&lt;/p&gt;
						      &lt;button onClick={handleCount}&gt;
						        Click me
						      &lt;/button&gt;
						    &lt;/div&gt;
						  );
						}
					</code></pre>
				</section>
				<section>
					<h2>useEffect</h2>
					<p>Accepts a function that contains imperative, possibly effectful code.</p>
					<pre><code class="javascript" data-trim>
						useEffect(didUpdate);
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="1,6-9">
						import React, { useState, useEffect } from &#39;react&#39;;

						function Example() {
						  const [count, setCount] = useState(0);

						  useEffect(() => {
						    // Update the document title using the browser API
						    document.title = `You clicked ${count} times`;
						  });

						  return (
						    &lt;div&gt;
						      &lt;p&gt;You clicked {count} times&lt;/p&gt;
						      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;
						        Click me
						      &lt;/button&gt;
						    &lt;/div&gt;
						  );
						}
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="1,6-9,11-14">
						import React, { Component } from "react";

						class Example extends Component {
						  state = { count: 0 };

						  componentDidMount() {
						    const { count } = this.state;
						    document.title = `You clicked ${count} times`;
						  }

						  componentDidUpdate() {
						    const { count } = this.state;
						    document.title = `You clicked ${count} times`;
						  }

						  handleCount = () => {
						    this.setState(prevState => ({
						      count: prevState.count + 1
						    }));
						  }

						  render() {
						    // ...
						  }
						}
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="">
						function FriendStatus({ friend }) {
						  const [isOnline, setIsOnline] = useState(null);

						  useEffect(() => {
						    function handleStatusChange(status) {
						      setIsOnline(status.isOnline);
						    }

						    ChatAPI.subscribe(friend.id, handleStatusChange);

						    // Specify how to clean up after this effect:
						    return function cleanup() {
						      ChatAPI.unsubscribe(friend.id, handleStatusChange);
						    };
						  });

						  if (isOnline === null) {
						    return 'Loading...';
						  }
						  return isOnline ? 'Online' : 'Offline';
						}
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="4-9,11-16,18-20">
						class FriendStatus extends React.Component {
						  state = { isOnline: null };

						  componentDidMount() {
						    ChatAPI.subscribeToFriendStatus(
						      this.props.friend.id,
						      this.handleStatusChange
						    );
						  }

						  componentWillUnmount() {
						    ChatAPI.unsubscribeFromFriendStatus(
						      this.props.friend.id,
						      this.handleStatusChange
						    );
						  }

						  handleStatusChange = (status) => {
						    this.setState({ isOnline: status.isOnline });
						  }

						  render() {
						    if (this.state.isOnline === null) {
						      return 'Loading...';
						    }
						    return this.state.isOnline ? 'Online' : 'Offline';
						  }
						}
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="15">
						function FriendStatus({ friend }) {
						  const [isOnline, setIsOnline] = useState(null);

						  useEffect(() => {
						    function handleStatusChange(status) {
						      setIsOnline(status.isOnline);
						    }

						    ChatAPI.subscribe(friend.id, handleStatusChange);

						    // Specify how to clean up after this effect:
						    return function cleanup() {
						      ChatAPI.unsubscribe(friend.id, handleStatusChange);
						    };
						  }, [friend.id]);

						  if (isOnline === null) {
						    return 'Loading...';
						  }
						  return isOnline ? 'Online' : 'Offline';
						}
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim data-line-numbers="">
						function PlanPage() {
						  const [plans, setPlans] = useState([]);

						  useEffect(() => {
						    async function fetchPlans() {
						      const response = await fetch('http://myapi/plans');
						      const json = await response.json();
						      setPlans(json);
						    }

						    fetchPlans();
						  }, []);

						  return (
						    &lt;ul&gt;
						      {plans.map(plan =&gt; (
						        &lt;li key={plan.id}&gt;{plan.name}&lt;/li&gt;
						      ))}
						    &lt;/ul&gt;
						  );
						}
					</code></pre>
				</section>
				<section>
					<h2>useContext</h2>
					<p>Accepts a context object and returns the current context value for that context.</p>
					<pre><code class="javascript" data-trim>
						const value = useContext(MyContext);
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code data-trim>
						class UserAvatar extends React.Component {
						  return (
						    &lt;AuthContext.Consumer&gt;
						      {({ user }) =&gt; (
						        &lt;ThemeContext.Consumer&gt;
						          {theme =&gt; &lt;Avatar src={user.img} theme={theme} /&gt;}
						        &lt;/ThemeContext.Consumer&gt;
						      )}
						    &lt;/AuthContext.Consumer&gt;
						  );
						}
					</code></pre>
					<pre><code class="javascript" data-trim>
						function UserAvatar() {
						  const { user } = useContext(AuthContext);
						  const theme = useContext(ThemeContext);

						  return (
						    &lt;Avatar src={user.img} theme={theme} /&gt;
						  );
						}
					</code></pre>
				</section>
				<section>
					<h2>useReducer</h2>
					<p>An alternative to useState.</p>
					<pre><code class="javascript" data-trim>
						const [state, dispatch] =
						  useReducer(reducer, initialArg, init);
					</code></pre>
				</section>
				<section class="full-code">
					<pre><code class="javascript" data-trim>
						const initialState = { count: 0 };

						function reducer(state, action) {
						  switch (action.type) {
						    case 'increment':
						      return { count: state.count + 1 };
						    case 'decrement':
						      return { count: state.count - 1 };
						    default:
						      return state;
						  }
						}

						function Counter() {
						  const [state, dispatch] =
						    useReducer(reducer, initialState);
						  return (
						    &lt;&gt;
						      Count: {state.count}
						      &lt;button onClick={() =&gt; dispatch({type: &#39;increment&#39;})}&gt;
						        + increment
						      &lt;/button&gt;
						      &lt;button onClick={() =&gt; dispatch({type: &#39;decrement&#39;})}&gt;
						        - decrement
						      &lt;/button&gt;
						    &lt;/&gt;
						  );
						}
					</code></pre>
				</section>
				<section>
					<h2>For more Hooks...</h2>
					<p>Read the docs: </p>
					<p>https://reactjs.org/docs/hooks-reference.html</p>
				</section>
				<section>
					<h2>Thanks!</h2>
					<p>
						<a href="http://www.brunonardini.com.br/" target="_blank">www.brunonardini.com.br</a>
					</p>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				history: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{
						src: 'plugin/highlight/highlight.js',
						async: true,
						callback: function() { hljs.initHighlightingOnLoad(); }
					}
				]
			});
		</script>
	</body>
</html>
